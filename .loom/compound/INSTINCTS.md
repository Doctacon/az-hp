# INSTINCTS

<!-- BEGIN:compound:instincts-md -->
## Active instincts (top confidence)

- **react-hook-extraction** (85%) [frontend, react, refactoring]
  - Trigger: When a React component file exceeds ~200 lines with mixed concerns (state, effects, event handlers, rendering)
  - Action: Extract logical groups into custom hooks (e.g., useMapSources, useMapLayers, useMapInteractions) with a barrel index.js export. Keep the main component as a thin composition layer.
- **az-hp-makefile-pipeline-targets** (80%) [build, makefile, pipeline]
  - Trigger: When adding or modifying pipeline steps
  - Action: Update the Makefile targets to reflect changes in pipeline scripts (01_download, 02_clip, 03_enrich, 04_generate_tiles). The Makefile is the canonical entry point for running pipeline stages.
- **barrel-export-hooks** (80%) [frontend, imports, react]
  - Trigger: When creating multiple custom hooks in a hooks/ directory
  - Action: Create an index.js barrel file that re-exports all hooks, enabling clean imports like `import { useMap, useMapSources } from './hooks'`
- **instincts-json-sync** (80%) [compound, loom, memory]
  - Trigger: When updating instincts or compound memory
  - Action: Both .loom/compound/instincts.json and .loom/compound/INSTINCTS.md must be updated together. The JSON is the source of truth; the MD is the human-readable view.
- **az-hp-frontend-component-extraction** (75%) [components, frontend, react]
  - Trigger: When App.jsx or any single component file exceeds ~200 lines
  - Action: Break large components into smaller files under frontend/src/components/ and import them back. This session reduced App.jsx by ~280 lines by extracting components.
- **az-hp-pipeline-stages** (75%) [az-hp, geospatial, pipeline]
  - Trigger: When working on the az-hp geospatial pipeline (01_download, 02_clip, 03_enrich, 04_generate_tiles)
  - Action: Each stage is a standalone script in pipeline/. Stage 01 downloads from ScienceBase/USGS, 02 clips to Arizona boundary, 03 enriches with attributes, 04 generates map tiles via shell. Use `uv` to run P...
- **frontend-component-extraction** (75%) [frontend, react, refactoring]
  - Trigger: When App.jsx or any single component exceeds ~200 lines
  - Action: Extract logical sections into dedicated component files under frontend/src/components/. The project already follows this pattern (e.g., LayerPanel.jsx).
- **makefile-pipeline-targets** (75%) [devops, makefile, pipeline]
  - Trigger: When adding new pipeline scripts
  - Action: Add corresponding Makefile targets so the full pipeline can be run via make commands. Keep targets composable and ordered.
- **az-hp-data-sources** (70%) [az-hp, data, pad-us, usgs]
  - Trigger: When discussing data sources, download scripts, or ScienceBase URLs in az-hp
  - Action: Primary data source is USGS PAD-US (Protected Areas Database) via ScienceBase (e.g. catalog item 6759b69fd34edfeb8710a3ea). Reference the PAD-US data manual at usgs.gov/programs/gap-analysis-project/p...
- **az-hp-frontend-react** (70%) [az-hp, frontend, react]
  - Trigger: When working on the az-hp frontend
  - Action: Frontend is in frontend/ using React (JSX). Main app in App.jsx with LayerPanel component. Uses package.json/package-lock.json for deps. The app visualizes geospatial tile layers generated by the pipe...
- **az-hp-makefile-pipeline** (70%) [az-hp, makefile, pipeline]
  - Trigger: When working on the az-hp project pipeline (enrichment, tile generation, etc.)
  - Action: Check the Makefile for existing targets before creating new scripts. Pipeline steps are orchestrated via Make targets.
- **az-hp-pipeline-shell-scripts** (70%) [bash, pipeline, shell]
  - Trigger: When editing or creating shell scripts in the pipeline/ directory
  - Action: Always include `set -euo pipefail` at the top of pipeline shell scripts and use explicit error handling for gdal/ogr commands
- **az-hp-pipeline-steps** (70%) [az-hp, makefile, pipeline]
  - Trigger: When working on the data pipeline or Makefile targets
  - Action: The pipeline follows numbered steps: 01_download.py, 02_clip_arizona.py, 03_enrich.py, 04_generate_tiles.sh. Steps 1-3 are Python (use uv), step 4 is bash. The Makefile orchestrates these.
- **az-hp-tile-generation-gdal** (70%) [gdal, geospatial, pipeline, tiles]
  - Trigger: When working on map tile generation or the 04_generate_tiles.sh script
  - Action: Use gdal2tiles.py or gdal_translate for raster tile generation; check that GDAL is available in the environment and handle missing dependencies gracefully
- **makefile-pipeline-orchestration** (70%) [make, orchestration, pipeline]
  - Trigger: When running or modifying the data pipeline
  - Action: Use `make` targets to run pipeline steps. Check the Makefile for available targets and their dependencies before running pipeline scripts directly.
- **az-hp-download-script-simplification** (65%) [data, pipeline, python]
  - Trigger: When modifying pipeline/01_download.py
  - Action: The download script was simplified significantly (~80 lines removed). Keep it focused on downloading raw data; transformation logic belongs in later pipeline stages.
- **az-hp-makefile-targets** (65%) [makefile, orchestration, pipeline]
  - Trigger: When running pipeline steps or adding new pipeline stages
  - Action: Add or update Makefile targets rather than running pipeline scripts directly; the Makefile serves as the orchestration layer for the data pipeline
- **az-hp-makefile-tasks** (65%) [az-hp, build, makefile]
  - Trigger: When running pipeline stages or build tasks in az-hp
  - Action: Check the Makefile for available targets before running pipeline scripts directly. The Makefile orchestrates pipeline stages and may include dependency tracking between stages.
- **az-hp-pipeline-bash-tiles** (65%) [az-hp, pipeline, tiles]
  - Trigger: When modifying or debugging the tile generation pipeline step
  - Action: Check pipeline/04_generate_tiles.sh â€” it is a bash script (not Python like the other pipeline steps). Verify shell compatibility and use `make tiles` to run it.
- **az-hp-uses-makefile** (65%) [az-hp, makefile]
  - Trigger: When running pipeline commands or looking for build/run targets
  - Action: Check the Makefile for available targets. The Makefile was recently updated (13 lines changed) and orchestrates the pipeline steps.
- **tile-generation-pipeline** (65%) [geospatial, pipeline, tiles]
  - Trigger: When working with the map tile generation step of the pipeline
  - Action: Check pipeline/04_generate_tiles.sh for tile generation logic. This is a standalone bash script, not part of the Python pipeline scripts.
- **az-hp-frontend-app-refactor** (60%) [az-hp, frontend, react]
  - Trigger: When working on the frontend React app or debugging UI issues
  - Action: Note that App.jsx was significantly simplified (307 lines removed). Component logic was likely extracted into separate component files like LayerPanel.jsx. Check frontend/src/components/ for extracted...
- **az-hp-frontend-jsx-pattern** (60%) [conventions, frontend, react]
  - Trigger: When working on frontend components in frontend/src/
  - Action: Use .jsx file extensions and plain JavaScript React patterns, not TypeScript. The project uses App.jsx as the main entry point.
- **az-hp-frontend-react-maplibre** (60%) [az-hp, frontend, maplibre, react]
  - Trigger: When modifying the az-hp frontend or working with map components
  - Action: The frontend is in frontend/ and uses React (App.jsx) with components like LayerPanel.jsx. Check frontend/package.json for dependencies. The app likely uses MapLibre GL for map rendering given the til...
- **az-hp-tile-generation** (60%) [az-hp, geospatial, pipeline]
  - Trigger: When working with the az-hp geospatial pipeline, specifically tile generation steps
  - Action: Check pipeline/04_generate_tiles.sh for the tile generation workflow. This project uses a numbered pipeline script convention (01_, 02_, 03_, 04_) in the pipeline/ directory.
- **az-hp-tile-generation-pipeline** (60%) [az-hp, geospatial, pipeline]
  - Trigger: When working with the az-hp map tile pipeline or modifying geographic data processing
  - Action: Check pipeline/04_generate_tiles.sh for tile generation logic. The pipeline follows a numbered sequence: 03_enrich.py -> 04_generate_tiles.sh.
- **tippecanoe-tile-generation** (60%) [az-hp, pipeline, tiles, tippecanoe]
  - Trigger: When generating map tiles from GeoJSON in the az-hp project
  - Action: Use the 04_generate_tiles.sh script which wraps tippecanoe. Check pipeline/04_generate_tiles.sh for the current tippecanoe flags and layer configuration.
- **az-hp-frontend-jsx-react** (55%) [az-hp, frontend, react]
  - Trigger: When editing the az-hp frontend UI
  - Action: The frontend entry point is frontend/src/App.jsx. Use React/JSX conventions when modifying components.

## Notes

- Instincts are the pre-skill layer: small, repeatable heuristics.
- When an instinct proves useful across sessions, promote it into a Skill.
<!-- END:compound:instincts-md -->
